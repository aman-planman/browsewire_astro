---
import BaseLayout from "../layouts/BaseLayout.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import CTA from "../components/CTA.astro";

// type Hero = {
//   id: number;
//   title: string;
//   subtitle: string;
// };

// banner

// src/pages/index.astro
const apiUrl =
    "http://localhost:8055/items/pages/1?fields=*,section.*,section.item.*,section.item.button.*,section.item.services.*,section.item.services.services_id.*";

const res = await fetch(apiUrl);
if (!res.ok) throw Error("Failed to fetch API data");

const data: { data: any } = await res.json();
const page = data.data;

// Separate sections into variables by collection
const heroSection: any | undefined = page.section.find(
    (s: any) => s.collection === "hero_section",
)?.item;
const whyChooseSection: any | undefined = page.section.find(
    (s: any) => s.collection === "why_choose",
)?.item;
const serviceSection: any | undefined = page.section.find(
    (s: any) => s.collection === "service_section",
)?.item;

const services = serviceSection?.services ?? [];

// console.log("Section:", serviceSection.status);

---

<BaseLayout title="O-Code">
    <Header />

    <main>
        <!--================= Banner section start =================-->

        {
            heroSection && (
                <section
                    class="vl-hero-area vl-hero-area-4 vl-hero-bg p-relative z-index-1 fix pt-190 pb-70"
                    style={{
                        backgroundImage: `url(http://localhost:8055/assets/${heroSection?.background_img || ""})`,
                    }}  
                >
                    <div class="container">
                        <div class="row">
                            <div class="col-xl-6 mb-30">
                                <div class="vl-hero-content p-relative z-index-1">
                                    <div class="vl-section-title-wrapper">
                                        <h4 class="vl-section-subtitle-5 vl-white vl-upper">
                                            {heroSection.subtitle}
                                        </h4>
                                        <h1 class="vl-section-heading vl-section-heading-2 vl-white pt-16">
                                            {heroSection.title}
                                        </h1>
                                        <p class="vl-section-description pt-16 pb-28">
                                            {heroSection.description}
                                        </p>
                                    </div>

                                    <div class="vl-btns mb-60">
                                        <div class="vl-herobtn vl-upper">
                                            {heroSection &&
                                                heroSection?.button.map(
                                                    (item: any) => (
                                                        <a
                                                            href={
                                                                item.link || "#"
                                                            }
                                                            class="theme-btn"
                                                        >
                                                            {item.name ||
                                                                "Book a Free Consultation"}
                                                            <span>
                                                                <i class="fa-regular fa-arrow-right" />
                                                            </span>
                                                        </a>
                                                    ),
                                                )}
                                        </div>
                                    </div>

                                    <div class="vl-hero-counter">
                                        {heroSection &&
                                            heroSection?.counter.map(
                                                (item: any) => (
                                                    <div class="vl-hero-counter-box mb-30">
                                                        <>
                                                            <span class="counter vl-white">
                                                                {item.value}
                                                            </span>
                                                            <span>
                                                                {" "}
                                                                {item.suffix}
                                                            </span>
                                                        </>
                                                        <h4 class="vl-hero-counter-box-title vl-white pt-12">
                                                            {item.key}
                                                        </h4>
                                                    </div>
                                                ),
                                            )}
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-6 mb-30">
                                <div class="vl-hero-img p-relative">
                                    <div class="vl-hero-shape-4">
                                        <div class="vl-shape-1">
                                            <img
                                                src="/assets/img/icons/vl-emoji-4.1.svg"
                                                alt=""
                                            />
                                        </div>
                                        <div class="vl-shape-2">
                                            <img
                                                src="/assets/img/icons/vl-emoji-4.2.svg"
                                                alt=""
                                            />
                                        </div>
                                        <div class="vl-shape-3">
                                            <img
                                                src="/assets/img/icons/vl-emoji-4.3.svg"
                                                alt=""
                                            />
                                        </div>
                                    </div>
                                    <div class="vl-hero-fan">
                                        <img
                                            class="w-100"
                                            src="/assets/img/icons/vl-fan.svg"
                                            alt=""
                                        />
                                    </div>
                                    <div class="vl-hero-img-4">
                                        <img
                                            class="w-100"
                                            src={`http://localhost:8055/assets/${heroSection?.section_img || ""}`}
                                            alt=""
                                        />
                                    </div>
                                    <div class="vl-hero-img-4-content">
                                        <h3 class="vl-hero-img-4-title pb-20">
                                            Worked With More Than <br /> 100+
                                            Technology
                                        </h3>
                                        <div class="vl-hero-img-4-grup">
                                            <div class="vl-hero-img-4-grup-img">
                                                <img
                                                    src="/assets/img/vl-hero-group.webp"
                                                    alt=""
                                                />
                                            </div>
                                            <div class="vl-hero-img-4-grup-content">
                                                <h4>
                                                    100+ <br /> Clients
                                                </h4>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            )
        }

        <!--================= Banner section End =================-->

        <!--================= About section start =================-->


    
     { whyChooseSection && (

        <section class="vl-about-area pt-100 pb-70">
            <div class="container">
                <div
                    class="row flex-lg-row flex-column-reverse align-items-center"
                >
                    <div class="col-lg-6 mb-30">
                        <div
                            class="vl-about-imgs vl-about-imgs-3 p-relative z-index-1 aos-init aos-animate"
                            data-aos="fade-right"
                            data-aos-duration="800"
                        >
                            <div class="vl-about-large4">
                                <img
                                    class="w-100"
                                    src={`http://localhost:8055/assets/${whyChooseSection.section_img2 || ""}`}
                                    alt=""
                                />
                            </div>
                            <div class="vl-about-sm-2 d-none d-md-block">
                                <img src={`http://localhost:8055/assets/${whyChooseSection.section_img1 || ""}`} alt="" />
                            </div>

                            <div
                                class="vl-about-poligon-shap p-relative z-index-1 fl-right"
                            >
                                <img
                                    src="/assets/img/icons/vl-about-poliogon.svg"
                                    alt=""
                                />
                                <div class="vl-about-poligon-title">
                                 
                                    {whyChooseSection?.image_info_card.map((item:any, index:number) => (
                                        <span class="counter vl-semi vl-white"
                                        >{item.value}
                                        </span>
                                                  <span>{item.suffix}</span>
                                         <p
                                        class="vl-fs-20 vl-lineheight-20 pt-10 m-0"
                                    >
                                        {item.key}
                                    </p>
                                    )
                                    )}
                                   
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6 mb-30">
                        <div
                            class="vl-about-content-4 aos-init aos-animate"
                            data-aos="fade-left"
                            data-aos-duration="800"
                        >
                            <div class="vl-section-title-wrapper">
                                <div class="vl-section-subheading">
                                    <h4 class="vl-section-subtitle-6 vl-upper">
                                    {whyChooseSection.heading}
                                    </h4>
                                </div>
                                <h2
                                    class="vl-section-title vl-section-title-2 pt-16 pb-20"
                                >
                                    {whyChooseSection.subheading}  
                                </h2>
                                <p class="vl-section-description-2 pb-32">
                                   {whyChooseSection.description}
                                </p>

                                <div class="row">

                                    {whyChooseSection?.section_items.map((item:any, index:number) => (
                                        <div class="col-lg-6 col-md-6">
                                            
                                            <div
                                            class="vl-about-icon-box-4 br-8 mb-30"
                                        >
                                            <div
                                                class="vl-about-icon-box-4-icon4"
                                            >
                                                <span
                                                    ><img
                                                        src="/assets/img/icons/vl-ser-ic-4.1.svg"
                                                        alt=""
                                                    />
                                                    </span>
                                            </div>
                                            <div
                                                class="vl-about-icon-box-4-content4"
                                            >
                                                <h3
                                                    class="vl-about-icon-box-4-title pt-20 pb-16"
                                                >
                                                    <a href="/service-single/"
                                                        >{item.item_name}</a>
                                                </h3>
                                                <p>
                                                   {item.item_description}
                                                </p>
                                            </div>
                                            </div>
                                            <div class="col-lg-6 col-md-6">
                                      
                                            </div>

                                        </div>

                                    ))
                                    }

                            </div>
                            <div class="vl-aboutbtn">
                                <div class="vl-herobtn vl-aboutbtn vl-upper">
                                     {whyChooseSection?.button.map((item:any, index:number) => (
                                    <a
                                        href={item.button_link}
                                        class="theme-btn theme-btn2"
                                        >{item.button_title}<span>
                                            <i class="fa-regular fa-arrow-right"></i></span></a>
                                     ))}
                                </div>
                            </div>
                        </div>
                    </div>
                    </div>
            </div>
            </div>
        </section>

    )
    }
    
        

        <!--================= About section End =================-->

        <!--================= Service section start =================-->

{serviceSection&&(

     <section class="vl-service-area vl-gray-bg-4 pt-100 pb-70">
            <div class="container">
                <div
                    class="vl-section-title-wrapper text-center mb-60 aos-init aos-animate"
                    data-aos="fade-up"
                    data-aos-duration="900"
                >
                    <div class="vl-section-subheading">
                        <h4 class="vl-section-subtitle-6 vl-upper">
                            {serviceSection.heading}
                        </h4>
                    </div>
                    <h2 class="vl-section-title vl-section-title-2 pt-16">
                        {serviceSection.subheading}
                    </h2>
                </div>
                 <div class="row">
                      {services.map((item: any) => (
                        
                                <div
                                    class="col-lg-4 col-md-6 mb-30 aos-init aos-animate"
                                    data-aos="fade-up"
                                    data-aos-duration="900"
                                >
                                    {/* <div>{item}</div> */}
                                    <div class="vl-service-icon-box-4 p-relative z-index-1 fix br-8">
                                        <div class="vl-service-icon-box-4-icon4">
                                            <span>
                                                <img
                                                    src="/assets/img/icons/vl-ser-ic-4.11.svg"
                                                    alt=""
                                                />
                                            </span>
                                        </div>
                                        <div class="vl-service-icon-box-4-content4">
                                            <h3 class="vl-service-icon-box-4-title pt-32 pb-16">
                                                <a
                                                    href={`/services/${item.services_id.slug}`}
                                                >
                                                    {item?.services_id.heading}
                                                </a>
                                            </h3>
                                            <p class="vl-fs-18 vl-lineheight-28 pb-24">
                                               {item?.services_id.main_description}
                                            </p>
                                            <a
                                                href={`/services/${item.services_id.slug}`}
                                                class="readmore"
                                            >
                                                {item?.button?.map((x: any) => (
                                                    <>{x.button_title}</>
                                                ))}
                                                

                                                <span>
                                                    <i class="fa-regular fa-arrow-right" />
                                                </span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
     ))}                    
                </div> 
            </div>
        </section>
)}

       


        <!--================= Service section End =================-->

        <!--================= Blog section start =================-->
        <section class="vl-blog pt-100 pb-70">
            <div class="container">
                <div
                    class="vl-section-title-wrapper text-center mb-60 aos-init aos-animate"
                    data-aos="fade-up"
                    data-aos-duration="900"
                >
                    <div class="vl-section-subheading">
                        <h4 class="vl-section-subtitle-6 vl-upper">Our Blog</h4>
                    </div>
                    <h2 class="vl-section-title vl-section-title-2 pt-16">
                        Latest Insights & Updates
                    </h2>
                </div>
                <div class="row">
                    <div class="col-lg-6">
                        <div
                            class="vl-single-blog-item vl-single-blog-item-3 mb-30 aos-init aos-animate"
                            data-aos="fade-right"
                            data-aos-duration="900"
                        >
                            <div
                                class="vl-single-blog-img vl-single-blog-img-4 br-8 fix p-relative"
                            >
                                <a href="/blog-single/"
                                    ><img
                                        class="w-100"
                                        src="/assets/img/cs_img4.jpg"
                                        alt=""
                                    /></a
                                >
                            </div>
                            <div class="vl-single-blog-4 p-relative z-index-1">
                                <div class="vl-single-blog-right-arow">
                                    <a href="/blog-single/"
                                        ><i class="fa-light fa-arrow-right"
                                        ></i></a
                                    >
                                </div>
                                <div class="vl-single-blog-meta">
                                    <div class="vl-single-blog-meta-box mr-16">
                                        <div
                                            class="vl-single-blog-meta-box-icon mr-4"
                                        >
                                            <span
                                                ><img
                                                    src="/assets/img/icons/vl-calender-3.1.svg"
                                                    alt=""
                                                /></span
                                            >
                                        </div>
                                        <div
                                            class="vl-single-blog-meta-box-content"
                                        >
                                            <a href="#">10 October 2024</a>
                                        </div>
                                    </div>
                                    <div class="vl-single-blog-meta-box mr-16">
                                        <div
                                            class="vl-single-blog-meta-box-icon mr-4"
                                        >
                                            <span
                                                ><img
                                                    src="/assets/img/icons/vl-user-3.2.svg"
                                                    alt=""
                                                /></span
                                            >
                                        </div>
                                        <div
                                            class="vl-single-blog-meta-box-content"
                                        >
                                            <a href="#">Shakib Mahmud</a>
                                        </div>
                                    </div>
                                </div>
                                <div
                                    class="vl-single-blog-content vl-single-blog-content-4 p-relative z-index-1"
                                >
                                    <h3
                                        class="vl-single-blog-title vl-single-blog-title-4 pt-18 pb-12"
                                    >
                                        <a href="/blog-single/"
                                            >Your Trusted Partner in Technology
                                            Transformation</a
                                        >
                                    </h3>
                                    <p class="pb-24">
                                        Looking to stay ahead in the fast-paced
                                        world technology? Our blog offers
                                        in-depth articles, case studies, &
                                        thought.
                                    </p>
                                    <a
                                        href="/blog-single/"
                                        class="vl-readmore redmore"
                                        >Read More <span
                                            ><i
                                                class="fa-regular fa-arrow-right"
                                            ></i></span
                                        ></a
                                    >
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-6">
                        <div
                            class="vl-single-blog-item vl-single-blog-item-3 mb-30 aos-init aos-animate"
                            data-aos="fade-left"
                            data-aos-duration="900"
                        >
                            <div
                                class="vl-single-blog-img vl-single-blog-img-4 br-8 fix p-relative"
                            >
                                <a href="/blog-single/"
                                    ><img
                                        class="w-100"
                                        src="/assets/img/cs_img5.jpg"
                                        alt=""
                                    /></a
                                >
                            </div>
                            <div class="vl-single-blog-4 p-relative z-index-1">
                                <div class="vl-single-blog-right-arow">
                                    <a href="#"
                                        ><i class="fa-light fa-arrow-right"
                                        ></i></a
                                    >
                                </div>
                                <div class="vl-single-blog-meta">
                                    <div class="vl-single-blog-meta-box mr-16">
                                        <div
                                            class="vl-single-blog-meta-box-icon mr-4"
                                        >
                                            <span
                                                ><img
                                                    src="/assets/img/icons/vl-calender-3.1.svg"
                                                    alt=""
                                                /></span
                                            >
                                        </div>
                                        <div
                                            class="vl-single-blog-meta-box-content"
                                        >
                                            <a href="#">10 October 2024</a>
                                        </div>
                                    </div>
                                    <div class="vl-single-blog-meta-box mr-16">
                                        <div
                                            class="vl-single-blog-meta-box-icon mr-4"
                                        >
                                            <span
                                                ><img
                                                    src="/assets/img/icons/vl-user-3.2.svg"
                                                    alt=""
                                                /></span
                                            >
                                        </div>
                                        <div
                                            class="vl-single-blog-meta-box-content"
                                        >
                                            <a href="#">Shakib Mahmud</a>
                                        </div>
                                    </div>
                                </div>
                                <div
                                    class="vl-single-blog-content vl-single-blog-content-4 p-relative z-index-1"
                                >
                                    <h3
                                        class="vl-single-blog-title vl-single-blog-title-4 pt-18 pb-12"
                                    >
                                        <a href="/blog-single/"
                                            >The Latest in Tech: News, Tips, and
                                            Insights</a
                                        >
                                    </h3>
                                    <p class="pb-24">
                                        Our blog is your go-to source for expert
                                        opinions practical tips the latest
                                        industry updates from digital
                                        transformation.
                                    </p>
                                    <a
                                        href="/blog-single/"
                                        class="vl-readmore redmore"
                                        >Read More <span
                                            ><i
                                                class="fa-regular fa-arrow-right"
                                            ></i></span
                                        ></a
                                    >
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!--================= Blog section End =================-->

        <!--================= Cta section start =================-->

        <CTA />
       
    </main>

    <Footer />
</BaseLayout>
